# 私有云仓库版本包升级

## 1.简介

​	此功能一般用于在内网无互联网条件下的Java工程的更新升级，在内网中，一般使用Bap作为私有云仓库服务，如果内网不需要部署多套服务，也可以使用单个GPF作为私有云仓库。

## 2.开启私有云仓库

​	Bap/GPF开启私有云仓库配置，需要在conf/base_advance.conf文件中配置以下参数：

```
yun.store.server.uri=ws://127.0.0.1:2020
yun.store.private=true
```

*yun.store.server.uri配置Bap/GPF的websocket连接地址。*

## 3.版本包升级步骤

*GPF上打开工程管理->云仓库管理*

![001](.\images\001.png)

![002](.\images\002.png)

Bap做为私有云仓库服务时，可以将GPF平台目录(*GPF版本>= 7.1.9*)，lib目录下的fe_core、fe_util、fe_web、cmn_util相关的jar包放到Bap的lib下启动

![008](.\images\008.png)

![009](.\images\009.png)

在webapps中配置web工程的访问入口cell 为：  ***cell.fe.cmn.IFeProjectMgrPage***

![010](.\images\010.png)



### 3.1.落地模式

*在连接公有云仓库的环境上导出版本包：*

![003](.\images\003.png)

*在连接私有云仓库的环境上导入版本包：*

（有两种导入方式：1.界面上传，2.指定服务器的版本包文件路径）

![004](.\images\004.png)

*导入完成后，在私有云仓库环境下导入升级后的Java工程：*

![005](.\images\005.png)

### 3.2.不落地模式

*如果私有云仓库环境能连接互联网，也可以使用不落地模式，直接从公有云仓库导出版本包到私有云仓库。*

![006](.\images\006.png)![007](.\images\007.png)